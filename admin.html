<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Quáº£n trá»‹ Admin</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>ğŸ‘‘ Báº£ng Ä‘iá»u khiá»ƒn Admin</h1>
    <button onclick="logout()" class="logout-btn">ÄÄƒng xuáº¥t</button>

    <section class="card">
      <h2>â• Táº¡o tÃ i khoáº£n thÃ nh viÃªn</h2>
      <input type="text" id="newEmail" placeholder="Email thÃ nh viÃªn">
      <input type="password" id="newPassword" placeholder="Máº­t kháº©u">
      <button onclick="addMember()">Táº¡o tÃ i khoáº£n</button>
      <p id="addStatus"></p>
    </section>

    <section class="card">
      <h2>ğŸ“‹ Danh sÃ¡ch tÃ i khoáº£n thÃ nh viÃªn</h2>
      <ul id="memberList"></ul>
    </section>

    <section class="card">
      <h2>ğŸ“‚ Táº£i file Ä‘á» tá»« mÃ¡y tÃ­nh</h2>
      <input type="file" id="uploadFile">
      <button onclick="uploadFile()">Táº£i lÃªn</button>
      <p id="uploadStatus"></p>
    </section>
  </div>

  <script src="data/users.js"></script>
  <script>
    const listEl = document.getElementById("memberList");
    const statusEl = document.getElementById("addStatus");
    const uploadStatus = document.getElementById("uploadStatus");

    function loadMembers() {
      listEl.innerHTML = "";
      USERS.filter(u => u.role === "member").forEach(user => {
        const li = document.createElement("li");
        li.textContent = `${user.email}`;
        listEl.appendChild(li);
      });
    }

    function addMember() {
      const email = document.getElementById("newEmail").value.trim();
      const password = document.getElementById("newPassword").value.trim();
      if (!email || !password) {
        statusEl.textContent = "âš ï¸ Nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin.";
        return;
      }
      USERS.push({ email, password, role: "member" });
      statusEl.textContent = `âœ… ÄÃ£ táº¡o tÃ i khoáº£n: ${email}`;
      document.getElementById("newEmail").value = "";
      document.getElementById("newPassword").value = "";
      loadMembers();
    }

    function uploadFile() {
      const fileInput = document.getElementById("uploadFile");
      const file = fileInput.files[0];
      if (!file) {
        uploadStatus.textContent = "âš ï¸ ChÆ°a chá»n file!";
        return;
      }
      // Giáº£ láº­p lÆ°u trá»¯ vÃ o danh sÃ¡ch file (sáº½ lÃ m á»Ÿ member.html)
      let uploaded = JSON.parse(localStorage.getItem("uploadedFiles") || "[]");
      uploaded.push({ name: file.name, size: file.size });
      localStorage.setItem("uploadedFiles", JSON.stringify(uploaded));
      uploadStatus.textContent = `âœ… ÄÃ£ táº£i lÃªn: ${file.name}`;
      fileInput.value = "";
    }

    function logout() {
      localStorage.removeItem("loggedInUser");
      window.location.href = "index.html";
    }

    // Chá»‰ cho admin truy cáº­p
    const user = JSON.parse(localStorage.getItem("loggedInUser"));
    if (!user || user.role !== "admin") {
      alert("Báº¡n khÃ´ng cÃ³ quyá»n truy cáº­p trang nÃ y!");
      window.location.href = "index.html";
    } else {
      loadMembers();
    }
  </script>
</body>
</html>
