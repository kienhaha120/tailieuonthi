<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ph√≤ng thi TSA</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>üìù Ph√≤ng thi TSA</h1>
    <button onclick="logout()" class="logout-btn">ƒêƒÉng xu·∫•t</button>
    <p><strong>‚è∞ Th·ªùi gian c√≤n l·∫°i: <span id="countdown">05:00</span></strong></p>
    <form id="quizForm">
      <div id="questions"></div>
      <button type="submit" class="btn">N·ªôp b√†i</button>
    </form>
    <div id="result" class="result-box"></div>
  </div>

  <script>
    const questions = [
      {
        question: "1. H√†m s·ªë y = x¬≤ c√≥ ƒë·ªì th·ªã l√† g√¨?",
        options: ["ƒê∆∞·ªùng th·∫≥ng", "Parabol", "Hyperbol", "Elip"],
        answer: 1
      },
      {
        question: "2. ƒê·∫°o h√†m c·ªßa sin(x) l√† g√¨?",
        options: ["cos(x)", "-sin(x)", "-cos(x)", "tan(x)"],
        answer: 0
      },
      {
        question: "3. T√≠ch ph√¢n c·ªßa 1/x l√†?",
        options: ["x", "ln|x|", "e^x", "1/x¬≤"],
        answer: 1
      }
    ];

    const questionsDiv = document.getElementById("questions");

    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `
        <p><strong>${q.question}</strong></p>
        ${q.options.map((opt, j) => `
          <label>
            <input type="radio" name="q${i}" value="${j}"> ${opt}
          </label><br>`).join("")}
        <hr>
      `;
      questionsDiv.appendChild(div);
    });

    // Countdown 5 ph√∫t
    let timeLeft = 300; // 5 ph√∫t
    const countdownEl = document.getElementById("countdown");

    const timer = setInterval(() => {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      countdownEl.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
      timeLeft--;
      if (timeLeft < 0) {
        clearInterval(timer);
        submitQuiz();
      }
    }, 1000);

    document.getElementById("quizForm").addEventListener("submit", function(e) {
      e.preventDefault();
      submitQuiz();
    });

    function submitQuiz() {
      clearInterval(timer);
      let score = 0;
      questions.forEach((q, i) => {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        if (selected && parseInt(selected.value) === q.answer) {
          score++;
        }
      });
      const resultEl = document.getElementById("result");
      resultEl.innerHTML = `<h3>‚úÖ B·∫°n ƒë√∫ng ${score}/${questions.length} c√¢u.</h3>`;
    }

    function logout() {
      localStorage.removeItem("loggedInUser");
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
